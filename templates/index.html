<!DOCTYPE html>
<html>
<head>
    <title>Clinical Trials Search</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
    <div class="main-container">
        <div class="left-section">
            <h1>Clinical Trials Search</h1>

            <!-- Tab Navigation -->
            <div class="tab-navigation" style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button id="searchTab" class="tab-button active" onclick="switchTab('search')" style="flex: 1; padding: 12px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                    üîç Search Trials
                </button>
                <button id="protocolTab" class="tab-button" onclick="switchTab('protocol')" style="flex: 1; padding: 12px; background: #ddd; color: #333; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                    üìã Protocol Designer
                </button>
                <button id="agentsTab" class="tab-button" onclick="switchTab('agents')" style="flex: 1; padding: 12px; background: #ddd; color: #333; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                    ü§ñ AI Agents
                </button>
            </div>

            <!-- Protocol Designer Section (Hidden by default) -->
            <div id="protocolDesigner" class="protocol-designer" style="display: none;">
                <div class="search-box">
                    <h2 style="color: #667eea; margin-bottom: 20px;">AI Protocol Research Report Generator</h2>
                    <p style="color: #666; margin-bottom: 20px;">Generate evidence-based protocol recommendations by analyzing similar clinical trials in our database.</p>

                    <div class="filter-section">
                        <div class="filter-grid">
                            <div class="form-group">
                                <label>Condition or Disease <span style="color: red;">*</span></label>
                                <input type="text" id="protocolCondition" placeholder="e.g., Type 2 Diabetes, Lung Cancer">
                            </div>
                            <div class="form-group">
                                <label>Intervention/Treatment (Optional)</label>
                                <input type="text" id="protocolIntervention" placeholder="e.g., GLP-1 Agonist, Chemotherapy">
                            </div>
                        </div>

                        <button onclick="generateProtocolReport()" style="width: 100%; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 20px;">
                            ‚ú® Generate Protocol Report
                        </button>
                    </div>

                    <!-- Report Display Area -->
                    <div id="protocolReportContainer" style="margin-top: 30px; display: none;">
                        <div style="margin-bottom: 15px; text-align: right;">
                            <button onclick="downloadReportAsPDF('protocolReportContent', 'Protocol-Report')" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                                üì• Download as PDF
                            </button>
                        </div>
                        <div id="protocolReportContent" style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); line-height: 1.8;"></div>
                    </div>

                    <!-- Loading indicator -->
                    <div id="protocolLoading" style="display: none; text-align: center; margin-top: 30px; padding: 40px; background: #f8f9fa; border-radius: 8px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">‚è≥</div>
                        <h3 style="color: #667eea;">Analyzing Similar Trials...</h3>
                        <p style="color: #666;">AI is reviewing historical trial data to generate your report</p>
                    </div>
                </div>
            </div>

            <!-- AI Agents Section (Hidden by default) -->
            <div id="agentsSection" class="agents-section" style="display: none;">
                <div class="search-box">
                    <h2 style="color: #667eea; margin-bottom: 20px;">ü§ñ Multi-Agent AI Features</h2>
                    <p style="color: #666; margin-bottom: 30px;">Experience advanced agentic AI capabilities for clinical trial analysis with specialized domain experts.</p>

                    <!-- First Row: Assessment and Design Pattern -->
                    <h3 style="color: #667eea; margin-top: 30px; margin-bottom: 20px; border-top: 2px solid #667eea; padding-top: 20px; font-size: 20px;">üìä Assessment & Design Analysis</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <!-- Amendment Risk Predictor -->
                        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-top: 4px solid #ff6b6b;">
                            <h3 style="color: #ff6b6b; margin-bottom: 15px; font-size: 18px;">‚ö†Ô∏è Amendment Risk Assessment</h3>
                            <p style="color: #666; margin-bottom: 20px; font-size: 14px;">Predict likelihood of protocol amendments based on design complexity, eligibility criteria, and operational burden.</p>

                            <input type="text" id="amendmentNctId" placeholder="Enter NCT ID (e.g., NCT12345678)" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 15px;">
                            <button onclick="runAmendmentRisk()" id="amendmentBtn" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Analyze Amendment Risk</button>

                            <div id="amendmentResult" style="background: #f8f9fa; padding: 20px; border-radius: 5px; margin-top: 20px; display: none; max-height: 500px; overflow-y: auto;"></div>
                        </div>

                        <!-- Design Pattern Discovery -->
                        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-top: 4px solid #4ecdc4;">
                            <h3 style="color: #4ecdc4; margin-bottom: 15px; font-size: 18px;">üîç Design Pattern Discovery</h3>
                            <p style="color: #666; margin-bottom: 20px; font-size: 14px;">Identify recurring trial design patterns, temporal trends, and best practices across similar trials.</p>

                            <input type="text" id="patternCondition" placeholder="Condition (e.g., diabetes)" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 10px;">
                            <select id="patternPhase" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 10px;">
                                <option value="">All Phases</option>
                                <option value="PHASE1">Phase 1</option>
                                <option value="PHASE2">Phase 2</option>
                                <option value="PHASE3">Phase 3</option>
                                <option value="PHASE4">Phase 4</option>
                            </select>
                            <input type="text" id="patternIntervention" placeholder="Intervention type (optional)" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 15px;">
                            <button onclick="runDesignPatterns()" id="patternBtn" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #4ecdc4 0%, #44a3a0 100%); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Discover Patterns</button>

                            <div id="patternResult" style="background: #f8f9fa; padding: 20px; border-radius: 5px; margin-top: 20px; display: none; max-height: 500px; overflow-y: auto;"></div>
                        </div>
                    </div>

                    <!-- Second Row: SOA and Multi Agent Protocol Analysis -->
                    <h3 style="color: #667eea; margin-top: 30px; margin-bottom: 20px; border-top: 2px solid #667eea; padding-top: 20px; font-size: 20px;">üìã Protocol & Schedule Design</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <!-- SoA Composer -->
                        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-top: 4px solid #f7b731;">
                            <h3 style="color: #f7b731; margin-bottom: 15px; font-size: 18px;">üìÖ SoA Composer</h3>
                            <p style="color: #666; margin-bottom: 20px; font-size: 14px;">Generate draft Schedule of Assessments based on visit patterns from similar successful trials.</p>

                            <input type="text" id="soaCondition" placeholder="Condition (e.g., diabetes)" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 10px;">
                            <select id="soaPhase" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 10px;">
                                <option value="">All Phases</option>
                                <option value="PHASE1">Phase 1</option>
                                <option value="PHASE2">Phase 2</option>
                                <option value="PHASE3">Phase 3</option>
                                <option value="PHASE4">Phase 4</option>
                            </select>
                            <input type="text" id="soaIntervention" placeholder="Intervention type (optional)" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 15px;">
                            <button onclick="runSoAComposer()" id="soaBtn" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #f7b731 0%, #e6a23c 100%); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Generate SoA</button>

                            <div id="soaResult" style="background: #f8f9fa; padding: 20px; border-radius: 5px; margin-top: 20px; display: none; max-height: 500px; overflow-y: auto;"></div>
                        </div>

                        <!-- Multi-Agent Protocol Analysis -->
                        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-top: 4px solid #667eea;">
                            <h3 style="color: #667eea; margin-bottom: 15px; font-size: 18px;">ü§ñ Multi-Agent Protocol Analysis</h3>
                            <p style="color: #666; margin-bottom: 20px; font-size: 14px;">4 specialized agents analyze a trial from different perspectives: eligibility, endpoints, statistics, and risk.</p>

                            <input type="text" id="analysisNctId" placeholder="Enter NCT ID (e.g., NCT12345678)" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 15px;">
                            <button onclick="runMultiAgentAnalysis()" id="analysisBtn" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Analyze Trial</button>

                            <div id="analysisResult" style="background: #f8f9fa; padding: 20px; border-radius: 5px; margin-top: 20px; display: none; max-height: 500px; overflow-y: auto;"></div>
                        </div>
                    </div>

                    <!-- Third Row: Agentic Search and Multi Agent Trial Comparison -->
                    <h3 style="color: #667eea; margin-top: 30px; margin-bottom: 20px; border-top: 2px solid #667eea; padding-top: 20px; font-size: 20px;">üîç Search & Comparison Tools</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;">
                        <!-- Agentic Search Enhancement -->
                        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-top: 4px solid #667eea;">
                            <h3 style="color: #667eea; margin-bottom: 15px; font-size: 18px;">üîç Agentic Search Enhancement</h3>
                            <p style="color: #666; margin-bottom: 20px; font-size: 14px;">Multiple AI agents analyze your query, expand medical terminology, and suggest optimal search strategies.</p>

                            <input type="text" id="agenticSearchQuery" placeholder="e.g., diabetes treatment" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 15px;">
                            <button onclick="runAgenticSearch()" id="agenticSearchBtn" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Enhance Search</button>

                            <div id="agenticSearchResult" style="background: #f8f9fa; padding: 20px; border-radius: 5px; margin-top: 20px; display: none; max-height: 500px; overflow-y: auto;"></div>
                        </div>

                        <!-- Multi-Agent Trial Comparison -->
                        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-top: 4px solid #667eea;">
                            <h3 style="color: #667eea; margin-bottom: 15px; font-size: 18px;">üî¨ Multi-Agent Trial Comparison</h3>
                            <p style="color: #666; margin-bottom: 20px; font-size: 14px;">Compare 2-5 trials across eligibility, design, and endpoints with strategic synthesis.</p>

                            <input type="text" id="compareNct1" placeholder="NCT ID #1" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 10px;">
                            <input type="text" id="compareNct2" placeholder="NCT ID #2" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 10px;">
                            <input type="text" id="compareNct3" placeholder="NCT ID #3 (optional)" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 15px;">
                            <button onclick="runTrialComparison()" id="compareBtn" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">Compare Trials</button>

                            <div id="compareResult" style="background: #f8f9fa; padding: 20px; border-radius: 5px; margin-top: 20px; display: none; max-height: 500px; overflow-y: auto;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search Section (Visible by default) -->
            <div id="searchSection" class="search-box">
                <div class="filter-section">
                    <h3>Basic Search</h3>
                    <div class="filter-grid">
                        <div class="form-group">
                            <label>Condition or Disease</label>
                            <input type="text" id="condition" placeholder="e.g., Cancer, Diabetes, COVID-19">
                        </div>
                        <div class="form-group">
                            <label>Intervention/Treatment</label>
                            <input type="text" id="intervention" placeholder="e.g., Docetaxel, Chemotherapy, Immunotherapy">
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" id="location" placeholder="Country, City, or State">
                        </div>
                    </div>
                </div>
                
                <div class="filter-section">
                    <h3>Study Status and Type</h3>
                    <div class="filter-grid">
                        <div class="form-group">
                            <label>Study Status</label>
                            <select id="status" multiple>
                                <option value="RECRUITING">Recruiting</option>
                                <option value="NOT_YET_RECRUITING">Not yet recruiting</option>
                                <option value="ACTIVE_NOT_RECRUITING">Active, not recruiting</option>
                                <option value="COMPLETED">Completed</option>
                                <option value="ENROLLING_BY_INVITATION">Enrolling by invitation</option>
                                <option value="SUSPENDED">Suspended</option>
                                <option value="TERMINATED">Terminated</option>
                                <option value="WITHDRAWN">Withdrawn</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Study Type</label>
                            <select id="studyType" multiple>
                                <option value="INTERVENTIONAL">Interventional</option>
                                <option value="OBSERVATIONAL">Observational</option>
                                <option value="EXPANDED_ACCESS">Expanded Access</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Study Phase</label>
                            <select id="phase" multiple>
                                <option value="EARLY_PHASE1">Early Phase 1</option>
                                <option value="PHASE1">Phase 1</option>
                                <option value="PHASE2">Phase 2</option>
                                <option value="PHASE3">Phase 3</option>
                                <option value="PHASE4">Phase 4</option>
                                <option value="NA">Not Applicable</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="filter-section">
                    <h3>Eligibility Criteria</h3>
                    <div class="filter-grid">
                        <div class="form-group">
                            <label>Sex</label>
                            <select id="sex">
                                <option value="">All</option>
                                <option value="FEMALE">Female</option>
                                <option value="MALE">Male</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Age Groups</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" name="ageGroups" value="CHILD"> Child (birth - 17)</label>
                                <label><input type="checkbox" name="ageGroups" value="ADULT"> Adult (18 - 64)</label>
                                <label><input type="checkbox" name="ageGroups" value="OLDER_ADULT"> Older Adult (65+)</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Accepts Healthy Volunteers</label>
                            <label><input type="checkbox" id="healthyVolunteers"> Yes</label>
                        </div>
                    </div>
                </div>
                
                <div class="filter-section">
                    <h3>Study Results & Documents</h3>
                    <div class="filter-grid">
                        <div class="form-group">
                            <label>Study Results</label>
                            <select id="hasResults">
                                <option value="">Any</option>
                                <option value="true">With results</option>
                                <option value="false">Without results</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Study Documents</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" id="hasProtocol"> Study Protocol</label>
                                <label><input type="checkbox" id="hasSAP"> Statistical Analysis Plan (SAP)</label>
                                <label><input type="checkbox" id="hasICF"> Informed Consent Form (ICF)</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Funder Type</label>
                            <select id="funderType" multiple>
                                <option value="NIH">NIH</option>
                                <option value="FED">Other U.S. Federal Agency</option>
                                <option value="INDUSTRY">Industry</option>
                                <option value="OTHER">All Others</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="filter-section">
                    <h3>Date Ranges</h3>
                    <div class="filter-grid-2">
                        <div class="form-group">
                            <label>Study Start From</label>
                            <input type="date" id="studyStartFrom">
                        </div>
                        <div class="form-group">
                            <label>Study Start To</label>
                            <input type="date" id="studyStartTo">
                        </div>
                        <div class="form-group">
                            <label>Primary Completion From</label>
                            <input type="date" id="primaryCompletionFrom">
                        </div>
                        <div class="form-group">
                            <label>Primary Completion To</label>
                            <input type="date" id="primaryCompletionTo">
                        </div>
                    </div>
                </div>
                
                <div class="filter-section">
                    <h3>More Ways to Search</h3>
                    <div class="filter-grid">
                        <div class="form-group">
                            <label>Title or Acronym</label>
                            <input type="text" id="title" placeholder="Search in study titles">
                        </div>
                        <div class="form-group">
                            <label>Outcome Measure</label>
                            <input type="text" id="outcome" placeholder="Primary or secondary outcome">
                        </div>
                        <div class="form-group">
                            <label>Lead Sponsor</label>
                            <input type="text" id="sponsor" placeholder="Organization name">
                        </div>
                        <div class="form-group">
                            <label>NCT Number</label>
                            <input type="text" id="nctId" placeholder="NCT########">
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 15px;">
                        <label><input type="checkbox" id="fdaaa801Violation"> FDAAA 801 Violations</label>
                    </div>
                </div>

                <!-- Semantic Search Toggle -->
                <div class="filter-section" style="background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border: 2px solid #667eea;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; flex: 1;">
                            <input type="checkbox" id="useSemanticSearch" style="width: 20px; height: 20px; cursor: pointer;">
                            <div>
                                <strong style="color: #667eea; font-size: 16px;">AI Semantic Search (RAG)</strong>
                                <div style="font-size: 12px; color: #666; margin-top: 5px;">
                                    Find trials by meaning, not just keywords. Example: "heart attack" will find "myocardial infarction" trials
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="button-group">
                    <button onclick="searchStudies()">Search</button>
                    <button class="secondary" onclick="clearFilters()">Clear Filters</button>
                </div>
            </div>
            
            <div class="results">
                <div class="results-header">
                    <h2>Results (<span id="totalCount">0</span> studies found)</h2>
                    <div>
                        Results per page: 
                        <select id="perPage" onchange="searchStudies()">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>
                <div id="resultsContainer"></div>
                <div id="pagination" class="pagination"></div>
            </div>
        </div>
        
        <!-- Right Sidebar Chat -->
        <div class="right-sidebar">
            <div class="chat-sidebar">
                <div class="chat-header">
                    <h2>Ask About All Results</h2>
                    <p>Chat about your filtered studies</p>
                </div>
                <div class="advanced-mode-container">
                    <label class="advanced-mode-label">
                        <input type="checkbox" id="advancedModeCheckbox" onchange="toggleAdvancedMode()">
                        <span>
                            Advanced Mode (Complete Data)
                            <span id="modeBadge" class="mode-badge essential">ESSENTIAL</span>
                        </span>
                    </label>
                    <div id="advancedWarning" class="warning-message">
                        ‚ö†Ô∏è Advanced mode includes ALL study data. Recommended for 50 or fewer studies for best performance.
                    </div>
                </div>

                <!-- Model Selector -->
                <div style="margin: 15px 0; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold; font-size: 14px;">
                        ü§ñ AI Model:
                    </label>
                    <select id="llmModelSelector" style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ddd; font-size: 14px;">
                        <option value="openai">OpenAI GPT-4o</option>
                        <option value="gemini">Google Gemini Pro</option>
                        <option value="groq">Groq Llama 3.1 70B</option>
                    </select>
                    <p style="margin: 5px 0 0 0; font-size: 11px; color: #666;">
                        <span id="modelStatus">‚úì OpenAI ready</span>
                    </p>
                </div>

                <div id="sidebarChatMessages" class="chat-messages">
                    <div class="chat-placeholder">
                        <h3>Search first, then ask questions!</h3>
                        <p style="margin: 15px 0;">After searching, ask questions like:</p>
                        <ul>
                            <li>What are the most common interventions?</li>
                            <li>How many studies are in Phase 3?</li>
                            <li>Which sponsors are funding these trials?</li>
                            <li>What are the primary outcomes?</li>
                            <li>Summarize the recruiting studies</li>
                        </ul>
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <input type="text" id="sidebarChatInput" placeholder="Ask about all filtered studies..." 
                               onkeypress="if(event.key==='Enter') sendSidebarMessage()" disabled>
                        <button class="chat-send-btn" onclick="sendSidebarMessage()" id="sidebarSendBtn" disabled>Send</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Individual Study Chat Modal -->
        <div id="chatModal" class="study-chat-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="chatStudyTitle">Chat about Study</h3>
                    <button onclick="closeChatModal()" class="close-btn">Close</button>
                </div>
                
                <div id="chatMessages" class="chat-messages">
                    <div style="text-align: center; color: #666; padding: 20px;">
                        Ask any question about this clinical trial study.
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <input type="text" id="chatInput" placeholder="Ask a question about this study..." 
                               onkeypress="if(event.key==='Enter') sendMessage()">
                        <button class="chat-send-btn" onclick="sendMessage()">Send</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>

